{"ast":null,"code":"import React from'react';import APIResponseErrorMessage from\"../commons/errorhandling/api-response-error-message\";import{Button,Card,CardHeader,Col,Row}from'reactstrap';import MyDeviceTable from\"./components/my-device-table\";import styles from'./style/style.module.css';// Import your styles\nimport*as API_USERS from'./api/my-device-api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class MyDeviceContainer extends React.Component{constructor(props){super(props);this.toggleForm=this.toggleForm.bind(this);this.reload=this.reload.bind(this);this.state={selected:false,tableData:[],isLoaded:false,errorStatus:0,error:null};}componentDidMount(){const id=sessionStorage.getItem(\"personId\");this.fetchDevices(id);}componentDidUpdate(prevProps,prevState){if(prevState.selected!==this.state.selected&&this.state.selected){const id=sessionStorage.getItem(\"personId\");this.fetchDevices(id);}}fetchDevices(params){return API_USERS.getDeviceByPersonId(params,(result,status,err)=>{if(result!==null&&status===200){this.setState({tableData:result,isLoaded:true});}else{this.setState({errorStatus:status,error:err});}});}toggleForm(){this.setState({selected:!this.state.selected});}reload(){this.setState({isLoaded:false});const id=sessionStorage.getItem(\"personId\");this.fetchDevices(id);}render(){return/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:/*#__PURE__*/_jsxs(Card,{className:styles.card,children:[/*#__PURE__*/_jsx(CardHeader,{className:styles.cardHeader,children:/*#__PURE__*/_jsx(\"strong\",{children:\"Device Management\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.cardBody,children:/*#__PURE__*/_jsx(Row,{className:styles.row,children:/*#__PURE__*/_jsxs(Col,{sm:{size:'10',offset:1},className:styles.tableContainer,children:[this.state.isLoaded&&/*#__PURE__*/_jsx(MyDeviceTable,{tableData:this.state.tableData,reloadHandler:this.reload,toggleForm:this.toggleForm,isOpen:this.state.selected}),this.state.errorStatus>0&&/*#__PURE__*/_jsx(APIResponseErrorMessage,{errorStatus:this.state.errorStatus,error:this.state.error})]})})})]})});}}export default MyDeviceContainer;","map":{"version":3,"names":["React","APIResponseErrorMessage","Button","Card","CardHeader","Col","Row","MyDeviceTable","styles","API_USERS","jsx","_jsx","jsxs","_jsxs","MyDeviceContainer","Component","constructor","props","toggleForm","bind","reload","state","selected","tableData","isLoaded","errorStatus","error","componentDidMount","id","sessionStorage","getItem","fetchDevices","componentDidUpdate","prevProps","prevState","params","getDeviceByPersonId","result","status","err","setState","render","className","container","children","card","cardHeader","cardBody","row","sm","size","offset","tableContainer","reloadHandler","isOpen"],"sources":["C:/Users/prico/OneDrive/Desktop/Faculta/SD/Assignment_3/react-demo/src/my-device/my-device-container.js"],"sourcesContent":["import React from 'react';\r\nimport APIResponseErrorMessage from \"../commons/errorhandling/api-response-error-message\";\r\nimport { Button, Card, CardHeader, Col, Row } from 'reactstrap';\r\nimport MyDeviceTable from \"./components/my-device-table\";\r\nimport styles from './style/style.module.css'; // Import your styles\r\nimport * as API_USERS from './api/my-device-api'\r\n\r\nclass MyDeviceContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.toggleForm = this.toggleForm.bind(this);\r\n        this.reload = this.reload.bind(this);\r\n\r\n        this.state = {\r\n            selected: false,\r\n            tableData: [],\r\n            isLoaded: false,\r\n            errorStatus: 0,\r\n            error: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const id = sessionStorage.getItem(\"personId\");\r\n        this.fetchDevices(id);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.selected !== this.state.selected && this.state.selected) {\r\n            const id = sessionStorage.getItem(\"personId\");\r\n            this.fetchDevices(id);\r\n        }\r\n    }\r\n\r\n    fetchDevices(params) {\r\n        return API_USERS.getDeviceByPersonId(params, (result, status, err) => {\r\n            if (result !== null && status === 200) {\r\n                this.setState({\r\n                    tableData: result,\r\n                    isLoaded: true\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    errorStatus: status,\r\n                    error: err\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleForm() {\r\n        this.setState({ selected: !this.state.selected });\r\n    }\r\n\r\n    reload() {\r\n        this.setState({ isLoaded: false });\r\n        const id = sessionStorage.getItem(\"personId\");\r\n        this.fetchDevices(id);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles.container}>\r\n                <Card className={styles.card}>\r\n                    <CardHeader className={styles.cardHeader}>\r\n                        <strong>Device Management</strong>\r\n                    </CardHeader>\r\n                    <div className={styles.cardBody}>\r\n                        \r\n                        <Row className={styles.row}>\r\n                            <Col sm={{ size: '10', offset: 1 }} className={styles.tableContainer}>\r\n                                {this.state.isLoaded && (\r\n                                    <MyDeviceTable\r\n                                        tableData={this.state.tableData}\r\n                                        reloadHandler={this.reload}\r\n                                        toggleForm={this.toggleForm}\r\n                                        isOpen={this.state.selected}\r\n                                    />\r\n                                )}\r\n                                {this.state.errorStatus > 0 && (\r\n                                    <APIResponseErrorMessage\r\n                                        errorStatus={this.state.errorStatus}\r\n                                        error={this.state.error}\r\n                                    />\r\n                                )}\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MyDeviceContainer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}