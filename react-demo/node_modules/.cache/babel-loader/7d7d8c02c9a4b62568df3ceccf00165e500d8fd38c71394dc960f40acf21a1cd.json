{"ast":null,"code":"import React from'react';import APIResponseErrorMessage from\"../commons/errorhandling/api-response-error-message\";import{Button,Card,CardHeader,Col,Row}from'reactstrap';import DeviceForm from\"./components/device-form\";import*as API_USERS from\"./api/device-api\";import*as API_USERS_PERSONS from\"../person/api/person-api\";import DeviceTable from\"./components/device-table\";import styles from'./style/style.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class DeviceContainer extends React.Component{constructor(props){super(props);this.toggleForm=this.toggleForm.bind(this);this.reload=this.reload.bind(this);this.state={selected:false,collapseForm:false,tableData:[],personData:[],isLoaded:false,errorStatus:0,error:null};}componentDidMount(){this.fetchDevices();this.fetchPersons();}componentDidUpdate(prevProps,prevState){if(prevState.selected!==this.state.selected&&this.state.selected){this.fetchPersons();}}fetchDevices(){return API_USERS.getDevices((result,status,err)=>{if(result!==null&&status===200){this.setState({tableData:result,isLoaded:true});}else{this.setState({errorStatus:status,error:err});}});}fetchPersons(){return API_USERS_PERSONS.getPersons((result,status,err)=>{if(result!==null&&status===200){this.setState({personData:result,isLoaded:true});}else{this.setState({errorStatus:status,error:err});}});}toggleForm(){this.setState({selected:!this.state.selected});}reload(){this.setState({isLoaded:false});this.fetchDevices();this.fetchPersons();}render(){return/*#__PURE__*/_jsxs(\"div\",{className:styles.deviceContainer,children:[/*#__PURE__*/_jsxs(Card,{className:styles.card,children:[/*#__PURE__*/_jsx(CardHeader,{className:styles.cardHeader,children:/*#__PURE__*/_jsx(\"strong\",{children:\"Device Management\"})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{sm:{size:'8',offset:1},children:/*#__PURE__*/_jsx(Button,{className:styles.addDeviceButton,onClick:this.toggleForm,children:\"Add Device\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tableContainer,children:[this.state.isLoaded&&/*#__PURE__*/_jsx(DeviceTable,{tableData:this.state.tableData,reloadHandler:this.reload,toggleForm:this.toggleForm,isOpen:this.state.selected,personData:this.state.personData}),this.state.errorStatus>0&&/*#__PURE__*/_jsx(APIResponseErrorMessage,{className:styles.errorMessage,errorStatus:this.state.errorStatus,error:this.state.error})]})]}),/*#__PURE__*/_jsx(DeviceForm,{reloadHandler:this.reload,toggleForm:this.toggleForm,isOpen:this.state.selected,personData:this.state.personData})]});}}export default DeviceContainer;","map":{"version":3,"names":["React","APIResponseErrorMessage","Button","Card","CardHeader","Col","Row","DeviceForm","API_USERS","API_USERS_PERSONS","DeviceTable","styles","jsx","_jsx","jsxs","_jsxs","DeviceContainer","Component","constructor","props","toggleForm","bind","reload","state","selected","collapseForm","tableData","personData","isLoaded","errorStatus","error","componentDidMount","fetchDevices","fetchPersons","componentDidUpdate","prevProps","prevState","getDevices","result","status","err","setState","getPersons","render","className","deviceContainer","children","card","cardHeader","sm","size","offset","addDeviceButton","onClick","tableContainer","reloadHandler","isOpen","errorMessage"],"sources":["C:/Users/prico/OneDrive/Desktop/Faculta/SD/Assignment_3/react-demo/src/device/device-container.js"],"sourcesContent":["import React from 'react';\r\nimport APIResponseErrorMessage from \"../commons/errorhandling/api-response-error-message\";\r\nimport { Button, Card, CardHeader, Col, Row } from 'reactstrap';\r\nimport DeviceForm from \"./components/device-form\";\r\nimport * as API_USERS from \"./api/device-api\";\r\nimport * as API_USERS_PERSONS from \"../person/api/person-api\";\r\nimport DeviceTable from \"./components/device-table\";\r\nimport styles from './style/style.module.css';\r\n\r\nclass DeviceContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.toggleForm = this.toggleForm.bind(this);\r\n        this.reload = this.reload.bind(this);\r\n        this.state = {\r\n            selected: false,\r\n            collapseForm: false,\r\n            tableData: [],\r\n            personData: [],\r\n            isLoaded: false,\r\n            errorStatus: 0,\r\n            error: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchDevices();\r\n        this.fetchPersons();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.selected !== this.state.selected && this.state.selected) {\r\n            this.fetchPersons();\r\n        }\r\n    }\r\n\r\n    fetchDevices() {\r\n        return API_USERS.getDevices((result, status, err) => {\r\n            if (result !== null && status === 200) {\r\n                this.setState({\r\n                    tableData: result,\r\n                    isLoaded: true\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    errorStatus: status,\r\n                    error: err\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    fetchPersons() {\r\n        return API_USERS_PERSONS.getPersons((result, status, err) => {\r\n            if (result !== null && status === 200) {\r\n                this.setState({\r\n                    personData: result,\r\n                    isLoaded: true\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    errorStatus: status,\r\n                    error: err\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleForm() {\r\n        this.setState({ selected: !this.state.selected });\r\n    }\r\n\r\n    reload() {\r\n        this.setState({ isLoaded: false });\r\n        this.fetchDevices();\r\n        this.fetchPersons();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles.deviceContainer}>\r\n                <Card className={styles.card}>\r\n                    <CardHeader className={styles.cardHeader}>\r\n                        <strong>Device Management</strong>\r\n                    </CardHeader>\r\n                    <Row>\r\n                        <Col sm={{ size: '8', offset: 1 }}>\r\n                            <Button className={styles.addDeviceButton} onClick={this.toggleForm}>\r\n                                Add Device\r\n                            </Button>\r\n                        </Col>\r\n                    </Row>\r\n                    <div className={styles.tableContainer}>\r\n                        {this.state.isLoaded && (\r\n                            <DeviceTable\r\n                                tableData={this.state.tableData}\r\n                                reloadHandler={this.reload}\r\n                                toggleForm={this.toggleForm}\r\n                                isOpen={this.state.selected}\r\n                                personData={this.state.personData}\r\n                            />\r\n                        )}\r\n                        {this.state.errorStatus > 0 && (\r\n                            <APIResponseErrorMessage\r\n                                className={styles.errorMessage}\r\n                                errorStatus={this.state.errorStatus}\r\n                                error={this.state.error}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n                <DeviceForm\r\n                    reloadHandler={this.reload}\r\n                    toggleForm={this.toggleForm}\r\n                    isOpen={this.state.selected}\r\n                    personData={this.state.personData}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DeviceContainer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}